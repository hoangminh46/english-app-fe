# Audit Report - 2026-01-16 (Quick Scan)

## Summary
- ğŸ”´ Critical Issues: 1
- ğŸŸ¡ Warnings: 3
- ğŸŸ¢ Suggestions: 1

## ğŸ”´ Critical Issues (Pháº£i sá»­a ngay)
1. **Sai thÆ° viá»‡n Ä‘iá»u hÆ°á»›ng (Router Import Error)**
   - **File:** `src/contexts/AuthContext.tsx`
   - **Nguy hiá»ƒm:** Sá»­ dá»¥ng `next/router` trong khi dá»± Ã¡n dÃ¹ng App Router (Next.js 16). Äiá»u nÃ y sáº½ gÃ¢y lá»—i Runtime (crash trang) khi thá»±c hiá»‡n logout hoáº·c redirect.
   - **CÃ¡ch sá»­a:** Chuyá»ƒn tá»« `import router from 'next/router'` sang sá»­ dá»¥ng hook `useRouter` tá»« `next/navigation`.

## ğŸŸ¡ Warnings (NÃªn sá»­a)
1. **Thiáº¿u Schema Validation (Zod)**
   - **File:** `src/components/KnowledgeNotes/NoteForm.tsx`
   - **Váº¥n Ä‘á»:** Äang validate thá»§ cÃ´ng báº±ng if/else. Theo quy táº¯c cá»§a dá»± Ã¡n (Guidelines), cáº§n dÃ¹ng Zod Ä‘á»ƒ Ä‘áº£m báº£o dá»¯ liá»‡u sáº¡ch vÃ  nháº¥t quÃ¡n.
   - **CÃ¡ch sá»­a:** TÃ­ch há»£p Zod schema vÃ  `react-hook-form`.

2. **LÆ°u trá»¯ Token chÆ°a tá»‘i Æ°u (Security)**
   - **File:** `src/services/authService.ts`, `src/lib/axios.ts`
   - **Váº¥n Ä‘á»:** Token lÆ°u á»Ÿ `localStorage`. Gáº·p rá»§i ro bá»‹ táº¥n cÃ´ng XSS (hacker láº¥y trá»™m token qua script).
   - **CÃ¡ch sá»­a:** CÃ¢n nháº¯c chuyá»ƒn sang dÃ¹ng HttpOnly Cookies náº¿u Backend há»— trá»£.

3. **Vi pháº¡m nguyÃªn táº¯c DRY (Don't Repeat Yourself)**
   - **File:** `src/contexts/AuthContext.tsx`
   - **Váº¥n Ä‘á»:** Äang gá»i trá»±c tiáº¿p `localStorage.setItem` thay vÃ¬ dÃ¹ng cÃ¡c hÃ m helper Ä‘Ã£ viáº¿t sáºµn trong `authService.ts`.
   - **CÃ¡ch sá»­a:** Chá»‰ sá»­ dá»¥ng `authService` Ä‘á»ƒ thao tÃ¡c vá»›i storage, Ä‘áº£m báº£o logic táº­p trung.

## ğŸŸ¢ Suggestions (TÃ¹y chá»n)
1. **Hardcoded Fallback URL**
   - **File:** `src/lib/axios.ts`
   - **Váº¥n Ä‘á»:** Hardcode `http://localhost:5000` lÃ m giÃ¡ trá»‹ máº·c Ä‘á»‹nh.
   - **CÃ¡ch sá»­a:** NÃªn Ä‘Æ°a toÃ n bá»™ vÃ o cáº¥u hÃ¬nh mÃ´i trÆ°á»ng hoáº·c má»™t file constants riÃªng.

## Next Steps
1. Sá»­a lá»—i Critical trong `AuthContext.tsx`.
2. Refactor `NoteForm.tsx` sang dÃ¹ng Zod.
3. Chá»‰nh sá»­a logic Ä‘á»“ng bá»™ storage trong `AuthContext.tsx`.
